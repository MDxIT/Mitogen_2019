CREATE OR REPLACE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `vw_billingDetail` AS
    SELECT
        rf.priority,
        rf.requestId,
        rf.placerOrderId,
        rf.externalRequestId,
        rf.externalSystem,
        rf.receivedDate,
        rf.type,
        rf.clinicalTrial,
        rf.workersComp,
        rf.consent,
        rf.consentBy,
        rf.consenteePatientRelationship,
        rf.patientSignature,
        rf.patientSignatureDate,
        rf.physicianSignature,
        rf.physicianSignatureDate,
        p.sqid,
        rf.mrn,
        rf.mrnType,
        rf.encounterNumber,
        rf.accountNumber,
        rf.patientId,
        p.firstName as patientFirstName,
        p.middleName as patientMiddleName,
        p.lastName as patientLastName,
        p.dob as patientDOB,
        p.geneticGender as patientGeneticGender,
        p.genderId as patientGenderIdentity,
        p.ethnicity as patientEthnicity,
        pb.billTo,
        pb.governmentPayment1,
        pb.governmentPolicyNumber1,
        pb.governmentPayment2,
        pb.governmentPolicyNumber2,
        pb.selfpay,
        pb.privateInsurance,
        pb.carrierId1,
        pb.policyNumber1,
        pb.groupNumber1,
        pb.policyHolder1FirstName,
        pb.policyHolder1LastName,
        pb.policyHolder1Id,
        pb.policyHolder1DOB,
        pb.policyHolder1Relationship,
        pb.carrierId2,
        pb.policyNumber2,
        pb.groupNumber2,
        pb.policyHolder2FirstName,
        pb.policyHolder2LastName,
        pb.policyHolder2Id,
        pb.policyHolder2DOB,
        pb.policyHolder2Relationship
    FROM
        requestForms rf
        LEFT OUTER JOIN patients p
        ON rf.patientId = p.patientId
        LEFT OUTER JOIN patientBilling pb
        ON rf.requestId = pb.requestId AND rf.patientId = pb.patientId

